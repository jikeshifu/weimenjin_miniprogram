### 更新说明

#### 10月29号更新
1、oss上传不了图片 更新 app/admin/controller/upload.php    xhadmin/extend/utils/oss/OssService.php   
2、cms应用  newslist标签报错   更新 xhadmin/extend/taglib/FragmentTag.php  
3、字段管理分页错误  xhadmin/app/admin/db/Field.php  


#### 11月2号更新
1、修正删除字段时当数据表字段不存在时报错，字段无法删除  
2、修改字段 以前是当数据表字段不存在则报错  现改为数据表存在则修改字段 不存在则创建字段  
3、api接口更新字段时 当字段传了才更新 不传则不更新 （原先是当设置了字段更新时 如果不传字段字段内容则会被清空）  
4、api接口 修正当设置后台创建时间字段不为空时 验证还是为空  
5、api接口token参数接收错误问题  


#### 12月16号更新
1、api接口增加图片验证码验证（原先只有token认证、短信认证） 
2、后台数据列表可以点击表头小箭头进行排序 
3、开关按钮重复点击无效问题（原先的必须要刷新） 
4、后台选项卡首页无法点击问题 
5、配置修改成功没有提示消息 
6、设置应用映射 后台菜单点击链接错误问题 
7、导出excel如果选中行导出提示没数据 
8、用户通过修改url参数查看非当前用户信息 权限检测重新调整 

#### 12月29号更新
跳转链接方法 生成的url 支持自定义字段带入 勾选字段即可 （以前只能默认带上主键）  
后台列表方法列出显示字段，以前是所有字段都查询出来（也支持勾选操作字段显示 可以定义不通权限的用户显示不同的字段）  
调整多图上传 删除图片按钮显示样式  
导入支持指定导入字段 勾选操作字段即可（以前是默认就支持导入全部字段 有安全问题）  
修复上一版的字段管理、方法管理开关按钮失效问题  
修复阿里云oss绑定自定义域名问题 （需在阿里云oss绑定域名）  
修复relate标签 无法连接变量问题  
设置复制后台菜单到同一应用 更改数据表名 （以前这种操作 容易误删数据）  
修复两个列表方法 会生成两个pageList 访问 访问报错问题 
修复cms重新生成 报数据表已存在问题 屏蔽了错误提示（其实是正常报错 不然数据库被覆盖）  
设置后台所有操作方法严格限制字段输入 
修复上一版跨域失效问题 
查看数据方法增加点击图片放大操作  
数据导出、查看数据方法 时间字段值为空时显示错误时间问题 


#### 1月12号更新
1、增加 所有的入库、查询 都进行了过滤 防止xss攻击、sql注入 
2、增加 上传黑名单过滤 过滤掉能在服务器执行的上传过来的脚本文件 
3、增加 上传检测文件已上传的开关按钮 设置以后相同的图片会重新上传 （见文档说明）
4、增加 api接口增加注释生成,文件头部注释注释的开关按钮 关掉以后接口不会生成详细的注释  （见文档说明）
5、增加 订单号字段类型 
6、增加 带搜索的下拉框字段类型 

1、优化 重新设计区间搜索的sql条件生成、进行了简化  
2、优化 所有的登录api接口都返回了用户id 并且返回字段都显示在控制器 使之更一目了然 
3、优化 后台配置的sql输入项目 过滤掉 delete、update、insert、drop等操作 
4、优化 数据查看api方法可以自定义查询字段功能 (以前只能通过主键id来操作) 
5、优化 api接口重新简化设计 
6、优化 简化后台权限检测中间件系统配置读取以及缓存操作 
7、优化 extend/xhadmin/commonService.php 文件  删除掉一些没必要的操作 其它的方法函数 放到了common.php(注意也删除了setTranslaion方法 支付业务的流水生成请自己实现) 
8、优化 下拉框数据结构类型 由原来的tinyint(4) 改成smallint(6)  不受tinyint 最大127数值限制 
9、优化 升级到最新的laydate 并且支持选择Y-m-d H:i:s、Y-m-d、Y-m、Y、H:i:s 日期格式的自定义  （所有涉及到日期的模块都要重新生成）  添加数据日期框默认为空 （见文档说明）
10、优化 多选框值对应的名称显示在列表（仅限自己配置的多选框选项，不支持sql语句生成的多选框选项） 并且加入条件搜索 
11、优化 设置sql语句的字段字段选项 如下拉框、单选框、多选框支持 一些复杂的 sql语句  如 select user_id,count(*) as count from cd_user 注意格式 as 后面跟别名
12、优化 升级tp内核到6.02版本

1、修复 admin应用独立 系统完成以后如不需要admin应用可以直接删除 
2、修复 后台登录超时点击直接退出到最外层框架 
3、修复 权限管理页面三级菜单的操作方法都出不来 
4、修复 两个列表方法报错问题（上一个版本没完全修复） 
5、修复 导出方法 操作名被固定dumpdata问题 现在可以定义多个导出操作 
6、修复 数据备份没有创建backup目录备份失败问题 
7、修复 小程序、公众号登录成功以后返回的token编码参数固定了member_id 这个参数 现在可以自己配置（参照账号密码登陆操作配置） 
8、修复 上一个版本查看当前用户的所属数据 session失效问题 
9、修复 当设置sql语句生成的列表 部分查询字段失效问题 
10、修复 修改数据表前缀 生成cms应用访问报错问题（cms应用前缀没有改） 
11、修复 当设置操作权限 列表的操作按钮还是能看得到 虽然点击返回没有权限 现在直接设置不可见 
12、修复 relate、sql标签里面sql语句拼接可以拼接变量 
13、修复 后台选项卡两个首页问题 （在菜单管理的首页管理将首页的链接最后面加上.html 变成/admin/Index/main.html） 
14、修复 字段类型改成货币字段以后 没有了默认值0 
15、修复 当设置token认证时  添加方法 生成了两个解码token参数的错误  
